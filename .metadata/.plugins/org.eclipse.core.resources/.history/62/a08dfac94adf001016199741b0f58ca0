/*
 * Button interrupt (EXTI) to toggle LED
 */

#include "stm32f4xx.h"

static void gpio_config(void);
static void EXTI_config(void);

int main(void)
{
	gpio_config();
	EXTI_config();

}

static void gpio_config(void)
{
	    // GPIOA is on AHB1 bus
		RCC->AHB1ENR |=RCC_AHB1ENR_GPIOAEN ;      //Enableing the clock for GPIO

		// GPIOC is on AHB1 bus
		RCC->AHB1ENR |=RCC_AHB1ENR_GPIOCEN ;      //Enableing the clock for GPIOA
		(void)RCC->AHB1ENR;                       // read-back to ensure clock is active
		//-------------------------------------

		GPIOA->MODER &= ~(3U << 10);             //Clearing the moder PA5 bits
		GPIOA->MODER |= (1U << 10);              // setting the moder  PA5 bits as output configuration

		GPIOA->OTYPER &= ~(1U << 5);               //Push -Pull type

		GPIOA->OSPEEDR &= ~(3U << 10);           //Clearing the output speed PA5 bits

		GPIOA->PUPDR &= ~(3U << 10);            //Clearing the PA5 PUPDR bits
		//--------------------------------------

		GPIOC->MODER &= ~(3U << 26);             //Clearing the moder PC13 bits to config as input mode

		GPIOC->OSPEEDR &= ~(3U << 26);           //Clearing the output speed PC13 bits to set  low speed

		GPIOC->PUPDR &= ~(3U << 26);            //Clearing the PC13 PUPDR bits
		GPIOC->PUPDR |= (1U << 26);             // config as pull-up

}

static void EXTI_config(void)
{
	SYSCFG->EXTICR
}
